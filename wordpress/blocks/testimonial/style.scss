/**
 * Testimonial block styles (frontend + editor)
 */

.dsa-testimonial {
  // Component tokens with fallbacks
  --dsa-testimonial--padding: var(--ks-spacing-l, 2rem);
  --dsa-testimonial--background: var(--ks-background-color-interface, #f8f9fa);
  --dsa-testimonial--border-radius: var(--ks-border-radius-m, 8px);
  --dsa-testimonial--quote-size: var(--ks-font-size-l, 1.125rem);
  --dsa-testimonial--quote-color: var(--ks-text-color-default, #333);
  --dsa-testimonial--name-color: var(--ks-text-color-default, #333);
  --dsa-testimonial--title-color: var(--ks-text-color-muted, #666);
  --dsa-testimonial--avatar-size: 56px;
  --dsa-testimonial--star-color: var(--ks-color-warning, #f59e0b);
  --dsa-testimonial--star-empty: var(--ks-border-color-default, #d1d5db);
  --dsa-testimonial--quote-mark-color: var(--ks-color-primary, #4e6bdc);

  display: block;
  margin: 0;
  padding: var(--dsa-testimonial--padding);
  background-color: var(--dsa-testimonial--background);
  border-radius: var(--dsa-testimonial--border-radius);
  position: relative;

  // Rating stars
  &__rating {
    display: flex;
    gap: 2px;
    margin-bottom: var(--ks-spacing-s, 0.75rem);
  }

  &__star {
    font-size: 1.25rem;
    color: var(--dsa-testimonial--star-empty);
    line-height: 1;

    &--filled {
      color: var(--dsa-testimonial--star-color);
    }
  }

  // Quote text
  &__quote {
    margin: 0;
    font-size: var(--dsa-testimonial--quote-size);
    line-height: var(--ks-line-height-body, 1.6);
    color: var(--dsa-testimonial--quote-color);
    font-style: italic;
  }

  // Footer with author info
  &__footer {
    display: flex;
    align-items: center;
    gap: var(--ks-spacing-s, 0.75rem);
    margin-top: var(--ks-spacing-m, 1rem);
    padding-top: var(--ks-spacing-m, 1rem);
    border-top: 1px solid var(--ks-border-color-default, #e5e7eb);
  }

  // Avatar
  &__avatar {
    flex-shrink: 0;
    width: var(--dsa-testimonial--avatar-size);
    height: var(--dsa-testimonial--avatar-size);
    border-radius: 50%;
    overflow: hidden;

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }

  // Author info
  &__author {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  &__name {
    font-style: normal;
    font-weight: var(--ks-font-weight-semibold, 600);
    color: var(--dsa-testimonial--name-color);
  }

  &__title {
    font-size: var(--ks-font-size-s, 0.875rem);
    color: var(--dsa-testimonial--title-color);
  }

  // Quote signs: Normal
  &--quotes-normal {
    .dsa-testimonial__quote::before {
      content: '"';
    }

    .dsa-testimonial__quote::after {
      content: '"';
    }
  }

  // Quote signs: Large
  &--quotes-large {
    padding-top: calc(var(--dsa-testimonial--padding) + 1.5rem);

    &::before {
      content: '"';
      position: absolute;
      top: var(--ks-spacing-s, 0.75rem);
      left: var(--dsa-testimonial--padding);
      font-size: 4rem;
      line-height: 1;
      color: var(--dsa-testimonial--quote-mark-color);
      opacity: 0.3;
      font-family: Georgia, serif;
    }
  }

  // Quote signs: None
  &--quotes-none {
    .dsa-testimonial__quote {
      font-style: normal;
    }
  }
}
